<div class="page">
  <div class="container">
    <form class="form" [formGroup]="myForm" (ngSubmit)="onSubmit()">
      <div class="ligne1">
        <input id="nameProject" formControlName="name" type="text" class="form-control" placeholder="Nom du Projet" />
        <div *ngIf="myForm.get('name')?.invalid && myForm.get('name')?.touched" class="error">
          Le nom du projet est requis.
        </div>
        <div class="form-group">
          <div class="ligne1">
            <label style="display:none;" class="genre-label " for="genre">Genre</label>
            <div class="form-control-container">
              <input type="text" placeholder="Genre" [matAutocomplete]="autoGenre" id="genre" class="form-control" />
              <mat-autocomplete #autoGenre="matAutocomplete" (optionSelected)="addGenre($event)">
                <mat-option *ngFor=" let genre of genresList" [value]="genre">
                  {{ genre }}
                </mat-option>
              </mat-autocomplete>
              <div class="selected-genres">
                <span *ngFor="let genre of selectedGenres">
                  {{ genre }}
                  <button type="button" (click)="removeGenre(genre)">x</button>
                </span>
              </div>
            </div>
          </div>
          <div *ngIf="myForm.get('genres')?.invalid && myForm.get('genres')?.touched" class="error">
            Le genre est requis.
          </div>
        </div>
      </div>

      <div class="ligne2">
        <div class="form-group">
          <label style="display: none;" class="" for="usedSkill">Compétence présente</label>
          <div class="form-control-container">
            <input type="text" placeholder="Compétence utilisée" [matAutocomplete]="autoSkill" id="usedSkill"
              class="form-control" />
            <mat-autocomplete #autoSkill="matAutocomplete" (optionSelected)="addUsedSkill($event)">
              <mat-option *ngFor="let skill of skillNamesList" [value]="skill">
                {{ skill }}
              </mat-option>
            </mat-autocomplete>
            <div class="selected-skills">
              <span *ngFor="let skill of selectedUsedSkills">
                {{ skill }}
                <button type="button" (click)="removeUsedSkill(skill)">x</button>
              </span>
            </div>
          </div>
          <div *ngIf="myForm.get('skillsPresent')?.invalid && myForm.get('skillsPresent')?.touched" class="error">
            La compétence est requise.
          </div>
        </div>
        <div class="form-group">
          <label style="display:none;" class="" for="requestedSkill">Compétence manquante</label>
          <div class="form-control-container">
            <input type="text" placeholder="Compétence manquante" [matAutocomplete]="autoSkillMissing"
              id="requestedSkill" class=" form-control" />
            <mat-autocomplete #autoSkillMissing="matAutocomplete" (optionSelected)="addRequestedSkill($event)">
              <mat-option *ngFor="let skill of skillNamesList" [value]="skill">
                {{ skill }}
              </mat-option>
            </mat-autocomplete>
            <div class="selected-skills2">
              <span *ngFor="let skill of selectedRequestedSkills">
                {{ skill }}
                <button type="button" (click)="removeRequestedSkill(skill)">x</button>
              </span>
            </div>
          </div>
          <div *ngIf="myForm.get('skillsMissing')?.invalid && myForm.get('skillsMissing')?.touched" class="error">
            La compétence est requise.
          </div>
        </div>
      </div>

      <div class="form-group">
        <div class="center-textarea">
          <label for="description" class="description-label">Description</label>
          <textarea id="description" formControlName="description" class="form-control"
            placeholder="Entrez la description de votre projet"></textarea>
        </div>
        <div *ngIf="myForm.get('description')?.invalid && myForm.get('description')?.touched" class="error">
          La description est requise.
        </div>
      </div>

      <div class="form-group" style="display: flex; align-items: center; justify-content: center;">
        <label style="display:none;" class="" for="fileInput">Liste de fichiers présents dans le projet</label>
        <div class="form-control-container">
          <input class="" style="display:none;" type="file" id="fileInput" accept=".mp3,.wav,.flac,.txt"
            (change)="handleFileChange($event)" />
          <label for="fileInput" class="custom-file-label">Cliquer pour ajouter un fichier</label>
          <div class="selected-files" *ngIf="selectedFiles.length > 0">
            <span *ngFor="let file of selectedFiles">
              {{ file.name }} <button type="button" (click)="removeFile(file)">x</button>
            </span>
          </div>
        </div>
      </div>

      <div class="parentCouleur">
        <label class="couleur" for="color">Sélectionnez une couleur</label>
      </div>
      <div class="parentCarre">
        <div class="carre orange" (click)="selectColor('orange')"></div>
        <div class="carre green" (click)="selectColor('green')"></div>
        <div class="carre purple" (click)="selectColor('purple')"></div>
        <div class="carre blue" (click)="selectColor('blue')"></div>
        <div class="carre red" (click)="selectColor('red')"></div>
        <div class="carre pink" (click)="selectColor('pink')"></div>
      </div>
      <input id="color" formControlName="color" type="hidden" />
      <div *ngIf="myForm.get('color')?.invalid && myForm.get('color')?.touched" class="error">
        La couleur est requise.
      </div>

      <div class="form-group button-group">
        <button type="submit" [disabled]="myForm.invalid" class="btn btn-primary">
          Enregistrer
        </button>
      </div>
    </form>
  </div>
</div>